<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BFC</title>
    <style type="text/css">
        .cont{
            height: 600px;
            margin-top: 300px;
        }
        img{
            width: 200px;
        }
        li{
            display: inline-block;
            margin-top: 50px;
        }
        /*#green {*/
            /*margin:10px 10px 10px 10px*/
        /*}*/
        /*#blue {*/
            /*margin:10px 10px 10px 10px*/
        /*}*/
        /*#red {*/
            /*margin:10px 10px 10px 10px*/
        /*}*/
        /*body {*/
            /*!*writing-mode:tb-rl;*!*/
            /*writing-mode:vertical-lr;*/
        /*}*/
    </style>
</head>
<body>
<!--<div id="green" style="background:lightgreen;height:100px;width:100px;"></div>-->
<!--<div id="blue" style="background:lightblue;height:100px;width:100px;"></div>-->
<!--<div id="red" style="background:pink;height:100px;width:100px;"></div>-->
<div class="cont"
></div>
<div>
    <ul>
    <li data-src="../sucai/1.jpg" id="1"></li>
    <li data-src="../sucai/2.jpg" id="2"></li>
    <li data-src="../sucai/3.jpg" id="3"></li>
    <li data-src="../sucai/4.jpg" id="4"></li>
    </ul>
</div>
</body>
<script>
    var oul=document.getElementsByTagName('ul')[0];
    var oli=document.getElementsByTagName('li');
     window.onload=function(){

        window.onscroll();
     }

    function createImg(obj) {
        let src = '';
        if (obj.dataset.src) {
            src = obj.dataset.src;
        } else {
            src = obj.getAttribute("data-src");
        }

        if (obj.children.length < 1) {
            var img = document.createElement('img');
            img.src = src;
            obj.appendChild(img);
        }
    }

        function getTop(obj){
            var h=0;
            while(obj){
                h+=obj.offsetTop;
                obj=obj.offsetParent;
            }
            return h;
            console.log("***"+h);
        }

        window.onscroll=function(){
            //可视高度+滚动条滑动高度
            var t=document.documentElement.clientHeight+(document.documentElement.scrollTop||document.body.scrollTop);
            for(let i=0,l=oli.length;i<l;i++){
                const oliH=getTop(oli[i]);
                if(oliH<t){
                    setTimeout('createImg(oli['+i+'])',500);
                }

            }
        }
</script>
</html>

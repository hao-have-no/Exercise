### koa中间件原理
koa的中间件实现既是洋葱圈是实现原理
1. 核心在于next的实现。next需要依次调用下一个middleware，
当到最后一个的时候结束，这样后面middleware的promise先resolve，然后直到第一个执行完毕

2. 实现时，在递归部分最好采用尾递归，用异步递归而不是同步递归

3. 复合函数，便于之后的中间件使用.适用于复杂环境

### 判断脚本运行环境
通过判断Global对象是否为window，如果不为window，当前脚本没有运行在浏览器中


### cookies,sessionStorage,localStrong
1. cookie
+ cookie保存在浏览器端,不设置过期时间的话，cookie被保存在内存中,生命周期随浏览器的关闭而结束；
+ 在浏览器中设置了cookie的过期时间，cookie被保存在硬盘中，关闭浏览器后，cookie数据仍然存在，直到过期时间结束才消失。
+ cookie只能保存字符串类型，以文本的方式,保存的数据不能超过4kb

2. sessionStrong
+ 同源浏览器下，一直保存，直到当前会话被关闭掉

3. localStrong
+ localStorage的生命周期是永久的，关闭页面或浏览器之后localStorage中的数据也不会消失。

sessionStrong和 localStrong共同点
1. 存储数据大小一般都是：5MB
2. 保存在客户端，不与服务器进行交互通信。
3. 存储字符串类型，对于复杂的对象可以使用ECMAScript提供的JSON对象的stringify和parse来处理

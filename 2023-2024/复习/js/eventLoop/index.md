## JS事件执行机制-EventLoop

### 浏览器的进程模型
#### 浏览器是个多进程多线程的应用程序
+ 分为浏览器进程，网络进程，渲染进程
+ 为了避免互不影响，会进程会开辟很多线程去执行任务
+ 渲染进程开启后，会开启一个渲染主线程

> 渲染进程如何工作
>> 工作范围：解析HTML,解析CSS,计算样式，布局，处理图层，页面绘制，执行全局JS，执行事件处理函数，执行定时器回调任务......
>> 如何调度这些任务：



### EventLoop 事件执行机制
>补充:宏任务是一个栈按先入先执行的原则，微任务也是一个栈也是先入先执行。但是每个宏任务都对应会有一个微任务栈，宏任务在执行过程中会先执行同步代码再执行微任务栈。
一次事件循环就是一次宏任务+微任务执行完毕。

> 事件循环（消息循环）
+ 开始：渲染主线程会进行无线循环
+ 每一次循环都会判断消息队列里是否有任务，有的话就把第一个任务拿出来执行一下，没有的话就进行休眠
+ 其他线程可以往消息队列里面塞入任务，当主线程休眠时，也会唤醒主线程，进行任务的执行环节

> 什么是异步:
>> 无法立即执行的任务,保证渲染主线程永不阻塞
+ 1. setTimeout 定时任务
+ 2. xhr,fetch 网络通信任务
+ 3. addEventListener 事件执行监听任务
+ 4. 会将对应的任务交给对应的线程去计算

>> chrome 最新定义，随着浏览器交互的复杂性，不再有宏队列这个说法，而是将不同的任务分为不同的队列，比如延时队列，交互队列，微任务队列，每个队列的任务执行级别不一样，微任务最高，延时最低
